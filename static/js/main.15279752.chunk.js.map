{"version":3,"sources":["store/loading.ts","store/message.ts","store/post.ts","store/query.ts","store/loadComplete.ts","helpers/api.ts","store/index.ts","components/Start.tsx","components/User.tsx","components/CommentList.tsx","components/PostItem.tsx","components/PostList.tsx","App.tsx","index.tsx"],"names":["reducer","loading","action","type","setMessage","message","posts","filter","post","id","postsId","map","comments","commentItem","commentId","query","isloadComplete","BASE_URL","preparedPostList","a","Promise","all","fetch","then","json","users","user","find","userId","comment","postId","rootReducer","combineReducers","loadingReducer","messageReducer","postReducer","queryReducer","loadComplete","loadCompleteReducer","isLoading","state","getMessage","getQuery","getIsLoaded","getVisiblePosts","title","body","toLowerCase","includes","store","createStore","composeWithDevTools","applyMiddleware","thunk","Start","dispatch","useDispatch","useSelector","className","onClick","postsFromServer","catch","disabled","User","name","email","address","href","street","suite","city","zipcode","CommentsList","PostItem","key","PostList","App","visiblePosts","placeholder","value","onChange","event","target","setQuery","Root","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.15279752.chunk.js","sourcesContent":["import { AnyAction } from 'redux';\n\n// Action types\nconst START_LOADING = 'START_LOADING';\nconst FINISH_LOADING = 'FINISH_LOADING';\n\n// Action creators\nexport const startLoading = () => ({ type: START_LOADING });\nexport const finishLoading = () => ({ type: FINISH_LOADING });\n\nconst reducer = (loading = false, action: AnyAction) => {\n  switch (action.type) {\n    case START_LOADING:\n      return true;\n\n    case FINISH_LOADING:\n      return false;\n\n    default:\n      return loading;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\n\n// Action types\nconst SET_MESSAGE = 'SET_MESSAGE';\n\n// Action creators\nexport const setMessage = (message: string) => ({ type: SET_MESSAGE, message });\n\n// message reducer receives only the `state.message` part, but not the entire Redux state\nconst reducer = (message = '', action: AnyAction) => {\n  switch (action.type) {\n    case SET_MESSAGE:\n      return action.message;\n\n    default:\n      return message;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\n\n// Action types\nconst SET_POSTS = 'SET_POSTS';\nconst REMOVE_POST = 'REMOVE_POST';\nconst REMOVE_COMMENT = 'REMOVE_COMMENT';\n\n// Action creators\n\nexport const setPosts = (posts: PostFromServer[]) => ({ type: SET_POSTS, posts });\nexport const removePost = (postsId: number) => ({ type: REMOVE_POST, postsId });\nexport const removeComment = (postsId: number, commentId: number) => (\n  {\n    type: REMOVE_COMMENT,\n    postsId,\n    commentId,\n  });\n\n// posts reducer receives only the `posts.message` part, but not the entire Redux state\nconst reducer = (posts: PostFromServer[] = [], action: AnyAction) => {\n  switch (action.type) {\n    case SET_POSTS:\n      return action.posts;\n    case REMOVE_POST:\n      return posts.filter(post => post.id !== action.postsId);\n    case REMOVE_COMMENT:\n      return posts.map(post => ({\n        ...post,\n        comments: post.comments\n          .filter((commentItem: Comment) => commentItem.id !== action.commentId),\n      }));\n    default:\n      return posts;\n  }\n};\n\nexport default reducer;\n\n// import { AnyAction } from 'redux';\n\n// // Action types\n// const SET_POSTS = 'SET_POSTS';\n// const DELETE_POST = 'DELETE_POSTS';\n// const DELETE_COMMENT = 'DELETE_COMMENTS';\n\n// // Action creators\n// export const setPosts = (posts: PostProps[]) => ({ type: SET_POSTS, posts });\n// export const deletePost = (postId: number) => ({ type: DELETE_POST, postId });\n// export const deleteComment = (postId: number, commentId: number) => ({\n//   type: DELETE_COMMENT,\n//   postId,\n//   commentId,\n// });\n\n// const reducer = (posts: PostProps[] = [], action: AnyAction) => {\n//   switch (action.type) {\n//     case SET_POSTS:\n//       return action.posts;\n//     case DELETE_POST:\n//       return posts.filter(post => post.id !== action.postId);\n//     case DELETE_COMMENT:\n//       return posts.map(post => ({\n//         ...post,\n//         comments: post.comments\n//           .filter((comment: CommentProps) => comment.id !== action.commentId),\n//       }));\n//     default:\n//       return posts;\n//   }\n// };\n\n// export default reducer;\n","import { AnyAction } from 'redux';\n\n// Action types\nconst QUERY = 'QUERY';\n\n// Action creators\n\nexport const setQuery = (query: string) => (\n  {\n    type: QUERY,\n    query,\n  });\n\n// query reducer receives only the `posts.message` part, but not the entire Redux state\nconst reducer = (query = '', action: AnyAction) => {\n  switch (action.type) {\n    case QUERY:\n      return action.query;\n\n    default:\n      return query;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\n\n// Action types\nconst LOAD_COMPLETE = 'LOAD_COMPLETE';\n\n// Action creators\n\nexport const setLoadComplete = () => ({ type: LOAD_COMPLETE });\n\n// query reducer receives only the `posts.message` part, but not the entire Redux state\nconst reducer = (isloadComplete = false, action: AnyAction) => {\n  switch (action.type) {\n    case LOAD_COMPLETE:\n      return true;\n    default:\n      return isloadComplete;\n  }\n};\n\nexport default reducer;\n","const BASE_URL = 'https://jsonplaceholder.typicode.com';\n\nconst getPosts = () => {\n  return fetch(`${BASE_URL}/posts`)\n    .then(posts => posts.json());\n};\n\nconst getUsers = () => {\n  return fetch(`${BASE_URL}/users`)\n    .then(users => users.json());\n};\n\nconst getComments = () => {\n  return fetch(`${BASE_URL}/comments`)\n    .then(comments => comments.json());\n};\n\nexport const preparedPostList = async () => {\n  const [posts, users, comments] = await Promise.all([\n    getPosts(), getUsers(), getComments(),\n  ]);\n\n  return posts.map((post: Post) => {\n    return {\n      ...post,\n      user: users.find((user: User) => user.id === post.userId),\n      comments: comments.filter((comment: Comment) => comment.postId === post.id),\n    };\n  });\n};\n","import {\n  createStore,\n  combineReducers,\n  applyMiddleware,\n  AnyAction,\n} from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunk from 'redux-thunk';\nimport { Dispatch } from 'react';\n\nimport loadingReducer, { finishLoading, startLoading } from './loading';\nimport messageReducer, { setMessage } from './message';\nimport postReducer, { setPosts } from './post';\nimport queryReducer from './query';\nimport loadCompleteReducer, { setLoadComplete } from './loadComplete';\nimport { preparedPostList } from '../helpers/api';\n\n/**\n * Each concrete reducer will receive all the actions but only its part of the state\n *\n * const rootReducer = (state = {}, action) => ({\n *   loading: loadingReducer(state.loading, action),\n *   message: messageReducer(state.message, action),\n * })\n */\nconst rootReducer = combineReducers({\n  loading: loadingReducer,\n  message: messageReducer,\n  posts: postReducer,\n  query: queryReducer,\n  loadComplete: loadCompleteReducer,\n});\n\n// We automatically get types returned by concrete reducers\nexport type RootState = ReturnType<typeof rootReducer>;\n\n// Selectors - a function receiving Redux state and returning some data from it\nexport const isLoading = (state: RootState) => state.loading;\nexport const getMessage = (state: RootState) => state.message;\nexport const getPosts = (state: RootState) => state.posts;\nexport const getQuery = (state: RootState) => state.query;\nexport const getIsLoaded = (state: RootState) => state.loadComplete;\n/**\n * Thunk - is a function that should be used as a normal action creator\n *\n * dispatch(loadMessage())\n */\nexport const getVisiblePosts = (state: RootState) => {\n  return state.posts\n    .filter((post: PostFromServer) => (\n      (post.title + post.body)\n        .toLowerCase()\n        .includes(state.query.toLowerCase())\n    ));\n};\n\nexport const loadPosts = () => {\n  // inner function is an action handled by Redux Thunk\n  return (dispatch: Dispatch<AnyAction>) => {\n    dispatch(startLoading());\n\n    preparedPostList()\n      .then(postsFromServer => {\n        dispatch(finishLoading());\n        dispatch(setMessage('Success'));\n        dispatch(setPosts(postsFromServer));\n        dispatch(setLoadComplete());\n      })\n      .catch(() => {\n        dispatch(setMessage('Error occurred when loading data'));\n      });\n  };\n};\n\nconst store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(thunk)),\n);\n\nexport default store;\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { isLoading } from '../store';\nimport { loadPosts } from './../store/index';\n\nexport const Start = () => {\n  const dispatch = useDispatch();\n  const loading = useSelector(isLoading);\n\n  return (\n    <button\n      className=\"btn btn-info\"\n      type=\"button\"\n      onClick={() => dispatch(loadPosts())}\n      disabled={loading}\n    >\n      {loading ? 'Loading...' : 'Load'}\n    </button>\n  );\n};\n","import React from 'react';\n\ntype Props = {\n  user: User;\n};\n\nexport const User: React.FC<Props> = ({ user }) => {\n  const {\n    name,\n    email,\n    address,\n  } = user;\n\n  return (\n    <div className=\"personalInfo\">\n      <h3 className=\"personalInfo__name\">\n        {name}\n      </h3>\n      <p className=\"personalInfo__email\">\n        <a href={`mailto=${email}`}>\n          {email}\n        </a>\n      </p>\n      <address className=\"personalInfo__address\">\n        <span>\n          {address.street}\n          {address.suite}\n        </span>\n        <span>{address.city}</span>\n        <span>{address.zipcode}</span>\n      </address>\n    </div>\n  );\n};\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { removeComment } from '../store/post';\n\ntype Props = {\n  comment: Comment;\n};\n\nexport const CommentsList: React.FC<Props> = ({ comment }) => {\n  const {\n    name,\n    body,\n    email,\n    postId,\n  } = comment;\n  const dispatch = useDispatch();\n\n  return (\n    <div>\n      <button\n        className=\"btn btn-warning\"\n        type=\"button\"\n        onClick={() => dispatch(removeComment(postId, comment.id))}\n      >\n        x\n      </button>\n      <h3>\n        {name}\n      </h3>\n      <p>\n        <a href={`mailto:${email}`}>\n          {email}\n        </a>\n      </p>\n      <p>\n        {body}\n      </p>\n    </div>\n  );\n};\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { User } from './User';\nimport { CommentsList } from './CommentList';\nimport { removePost } from '../store/post';\n\ntype Props = {\n  post: PostFromServer;\n  // postId: number;\n};\n\nexport const PostItem: React.FC<Props> = ({ post }) => {\n  const {\n    title,\n    body,\n    user,\n    comments,\n  } = post;\n\n  const dispatch = useDispatch();\n\n  return (\n    <div>\n      <button\n        className=\"btn btn-danger\"\n        type=\"button\"\n        onClick={() => dispatch(removePost(post.id))}\n      >\n        x\n      </button>\n      <h2>{title}</h2>\n      <p>{body}</p>\n\n      <section className=\"post__personalInfo\">\n        <User user={user} />\n      </section>\n      <section className=\"comments\">\n        <ul className=\"comment__list\">\n          {comments.map((comment: Comment) => (\n            <li className=\"comment__item\" key={comment.id}>\n              <CommentsList comment={comment} />\n            </li>\n          ))}\n        </ul>\n      </section>\n    </div>\n  );\n};\n","import React from 'react';\nimport { PostItem } from './PostItem';\n\ntype Props = {\n  posts: PostFromServer[];\n};\n\nexport const PostList: React.FC<Props> = ({ posts }) => {\n  return (\n    <>\n      <ul className=\"post__list\">\n        {posts.map(post => (\n          <li className=\"post__item\" key={post.id}>\n            <PostItem post={post} />\n          </li>\n        ))}\n      </ul>\n    </>\n  );\n};\n","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport './App.scss';\nimport { Start } from './components/Start';\n\nimport {\n  isLoading,\n  getMessage,\n  getVisiblePosts,\n  getQuery,\n  getIsLoaded,\n} from './store';\nimport { PostList } from './components/PostList';\n\nimport { setQuery } from './store/query';\n\nconst App: React.FC = () => {\n  const dispatch = useDispatch();\n  const loading = useSelector(isLoading);\n  const message = useSelector(getMessage) || 'Ready!';\n  const visiblePosts = useSelector(getVisiblePosts);\n  const query = useSelector(getQuery);\n  const loadComplete = useSelector(getIsLoaded);\n\n  const handleSearchPhrase = (event: React.FormEvent<HTMLInputElement>) => {\n    const { value } = event.target as HTMLInputElement;\n\n    dispatch(setQuery(value));\n  };\n\n  return (\n    <div className=\"App\">\n      <h1>Redux list of posts</h1>\n      <h2>{loading ? 'Loading...' : message}</h2>\n      {loadComplete\n        ? (\n          <div className=\"control\">\n            <input\n              type=\"text\"\n              id=\"search-query\"\n              className=\"form-control mr-sm-2\"\n              placeholder=\"Search\"\n              value={query}\n              onChange={handleSearchPhrase}\n            />\n          </div>\n        )\n        : <Start />}\n      <PostList posts={visiblePosts} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport App from './App';\nimport store from './store';\n\nconst Root = () => (\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>\n);\n\nReactDOM.render(<Root />, document.getElementById('root'));\n"],"sourceRoot":""}